<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ã‚¤ã‚±é… - å®šæœŸä¾¿ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³</title>
    
    <!-- PWAå¯¾å¿œ -->
    <meta name="description" content="æ–™ç†ã‚‚ã€ã¨ãã‚ãã‚‚ã€ä¸€ç·’ã«å±Šã‘ã¾ã™ã€‚ã‚¤ã‚±ãƒ¡ãƒ³é…é”å“¡ã‚’æŒ‡åã§ãã‚‹æ–°æ„Ÿè¦šãƒ‡ãƒªãƒãƒªãƒ¼ã‚¢ãƒ—ãƒªã€‚">
    <meta name="theme-color" content="#ff6b9d">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="ã‚¤ã‚±é…">
    <link rel="manifest" href="./manifest.json">
    <link rel="apple-touch-icon" href="./icons/icon-192x192.png">
    
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <!-- ãƒ˜ãƒƒãƒ€ãƒ¼ -->
    <header class="header">
        <div class="container">
            <div class="header-content">
                <div class="header-left">
                    <h1 class="logo">ğŸš´ ã‚¤ã‚±é… Ikehai</h1>
                    <p class="tagline">ã¨ãã‚ãé…é”ã€å±Šã‘ã¾ã™</p>
                </div>
                <div class="header-right">
                    <a href="index.html" class="shop-link">ğŸ  ãƒ›ãƒ¼ãƒ </a>
                    <a href="shop.html" class="shop-link">ğŸ›ï¸ ã‚·ãƒ§ãƒƒãƒ—</a>
                </div>
            </div>
        </div>
    </header>

    <!-- ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ -->
    <main class="main-content">
        <div class="container">
            <section class="intro-section">
                <h2>ğŸ“¦ å®šæœŸä¾¿ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³</h2>
                <p>æ¯æœˆã€ã¨ãã‚ããŒå±Šã</p>
                <p class="intro-highlight">ğŸ’• æ¨ã—æ´»ã‚’ã‚‚ã£ã¨æ¥½ã—ãã€ã‚‚ã£ã¨æ¿ƒå¯†ã«</p>
            </section>

            <!-- ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã‚µãƒ–ã‚¹ã‚¯è¡¨ç¤º -->
            <div id="activeSubscriptions" class="active-subscriptions">
                <!-- JavaScriptã§ç”Ÿæˆ -->
            </div>

            <!-- ã‚°ãƒƒã‚ºå®šæœŸä¾¿ -->
            <section class="subscription-section">
                <h3 class="section-title">ğŸ ã‚°ãƒƒã‚ºå®šæœŸä¾¿</h3>
                <p class="section-description">æ¯æœˆ15æ—¥ã€ã‚¤ã‚±é…ã‚ªãƒªã‚¸ãƒŠãƒ«ã‚°ãƒƒã‚ºï¼‹é™å®šã‚¢ã‚¤ãƒ†ãƒ ãŒã‚ãªãŸã®ã‚‚ã¨ã¸</p>
                
                <div class="subscription-plans" id="subscriptionPlans">
                    <!-- JavaScriptã§ç”Ÿæˆ -->
                </div>
            </section>

            <!-- ãƒ•ãƒ¼ãƒ‰å®šæœŸä¾¿ -->
            <section class="subscription-section">
                <h3 class="section-title">ğŸ± ã‚°ãƒ«ãƒ¡å®šæœŸä¾¿</h3>
                <p class="section-description">æœˆ2å›ã€äººæ°—ãƒ¬ã‚¹ãƒˆãƒ©ãƒ³ã®æ–™ç†ã‚’ã‚¤ã‚±ãƒ¡ãƒ³é…é”å“¡ãŒãŠå±Šã‘</p>
                
                <div class="food-subscription-card" id="foodSubscription">
                    <!-- JavaScriptã§ç”Ÿæˆ -->
                </div>
            </section>

            <!-- æ¯”è¼ƒè¡¨ -->
            <section class="subscription-section">
                <h3 class="section-title">ğŸ“Š ãƒ—ãƒ©ãƒ³æ¯”è¼ƒ</h3>
                <div class="comparison-table-container">
                    <table class="comparison-table">
                        <thead>
                            <tr>
                                <th>ç‰¹å…¸</th>
                                <th>ãƒ™ãƒ¼ã‚·ãƒƒã‚¯</th>
                                <th>ãƒ—ãƒ¬ãƒŸã‚¢ãƒ </th>
                                <th>ãƒ©ã‚°ã‚¸ãƒ¥ã‚¢ãƒªãƒ¼</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>æœˆé¡æ–™é‡‘</td>
                                <td>Â¥2,980</td>
                                <td>Â¥4,980</td>
                                <td>Â¥9,980</td>
                            </tr>
                            <tr>
                                <td>ãŠå±Šã‘é »åº¦</td>
                                <td>æœˆ1å›</td>
                                <td>æœˆ1å›</td>
                                <td>æœˆ1å›</td>
                            </tr>
                            <tr>
                                <td>ã‚°ãƒƒã‚ºæ•°</td>
                                <td>2ã€œ3ç‚¹</td>
                                <td>3ã€œ5ç‚¹</td>
                                <td>5ã€œ8ç‚¹</td>
                            </tr>
                            <tr>
                                <td>æœªå…¬é–‹å†™çœŸ</td>
                                <td>ï¼</td>
                                <td>Låˆ¤</td>
                                <td>A5å†™çœŸé›†</td>
                            </tr>
                            <tr>
                                <td>ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸</td>
                                <td>æ‰‹æ›¸ã</td>
                                <td>ç›´ç­†</td>
                                <td>ãƒ“ãƒ‡ã‚ª</td>
                            </tr>
                            <tr>
                                <td>ã‚¤ãƒ™ãƒ³ãƒˆå„ªå…ˆäºˆç´„</td>
                                <td>ï¼</td>
                                <td>âœ“</td>
                                <td>âœ“ï¼ˆç„¡æ–™å‚åŠ ï¼‰</td>
                            </tr>
                            <tr>
                                <td>ã‚ªãƒ³ãƒ©ã‚¤ãƒ³äº¤æµä¼š</td>
                                <td>ï¼</td>
                                <td>æœˆ1å›</td>
                                <td>ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆ</td>
                            </tr>
                            <tr>
                                <td>èª•ç”Ÿæ—¥ç‰¹å…¸</td>
                                <td>ï¼</td>
                                <td>ï¼</td>
                                <td>âœ“</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- ã‚ˆãã‚ã‚‹è³ªå• -->
            <section class="subscription-section">
                <h3 class="section-title">â“ ã‚ˆãã‚ã‚‹è³ªå•</h3>
                <div class="faq-container">
                    <div class="faq-item">
                        <h4 class="faq-question">ğŸ“… ã„ã¤å±Šãã¾ã™ã‹ï¼Ÿ</h4>
                        <p class="faq-answer">ã‚°ãƒƒã‚ºå®šæœŸä¾¿ã¯æ¯æœˆ15æ—¥ã€ã‚°ãƒ«ãƒ¡å®šæœŸä¾¿ã¯æ¯æœˆ1æ—¥ãƒ»15æ—¥ã«ãŠå±Šã‘ã—ã¾ã™ã€‚</p>
                    </div>
                    <div class="faq-item">
                        <h4 class="faq-question">ğŸ”„ è§£ç´„ã¯ã„ã¤ã§ã‚‚ã§ãã¾ã™ã‹ï¼Ÿ</h4>
                        <p class="faq-answer">ã¯ã„ã€ã„ã¤ã§ã‚‚è§£ç´„å¯èƒ½ã§ã™ã€‚æ¬¡å›ãŠå±Šã‘æ—¥ã®5æ—¥å‰ã¾ã§ã«ãŠç”³ã—å‡ºãã ã•ã„ã€‚</p>
                    </div>
                    <div class="faq-item">
                        <h4 class="faq-question">ğŸ ã‚°ãƒƒã‚ºã®å†…å®¹ã¯é¸ã¹ã¾ã™ã‹ï¼Ÿ</h4>
                        <p class="faq-answer">ãƒ©ã‚°ã‚¸ãƒ¥ã‚¢ãƒªãƒ¼ãƒœãƒƒã‚¯ã‚¹ã®ã¿ã€ã‚°ãƒƒã‚ºãƒªã‚¯ã‚¨ã‚¹ãƒˆæ¨©ãŒã‚ã‚Šã¾ã™ã€‚ãã®ä»–ã®ãƒ—ãƒ©ãƒ³ã¯ãŠæ¥½ã—ã¿å†…å®¹ã¨ãªã‚Šã¾ã™ã€‚</p>
                    </div>
                    <div class="faq-item">
                        <h4 class="faq-question">ğŸ‘¨ é…é”å“¡ã¯æŒ‡åã§ãã¾ã™ã‹ï¼Ÿ</h4>
                        <p class="faq-answer">ã‚°ãƒ«ãƒ¡å®šæœŸä¾¿ã®ã¿ã€é…é”å“¡ã®æŒ‡åãŒå¯èƒ½ã§ã™ã€‚ã‚°ãƒƒã‚ºå®šæœŸä¾¿ã¯é€šå¸¸é…é€ã¨ãªã‚Šã¾ã™ã€‚</p>
                    </div>
                </div>
            </section>
        </div>
    </main>

    <!-- ç™»éŒ²ç¢ºèªãƒ¢ãƒ¼ãƒ€ãƒ« -->
    <div id="subscriptionModal" class="modal">
        <div class="modal-content">
            <div class="modal-icon">ğŸ“¦</div>
            <h2 id="modalTitle">ã‚µãƒ–ã‚¹ã‚¯ç™»éŒ²</h2>
            <div class="subscription-confirm">
                <div id="modalPlanInfo" class="modal-plan-info">
                    <!-- JavaScriptã§ç”Ÿæˆ -->
                </div>
                <div class="subscription-notes">
                    <h4>ğŸ“‹ ã”ç¢ºèªäº‹é …</h4>
                    <ul>
                        <li>âœ“ åˆå›ãŠå±Šã‘ã¯æ¥æœˆ15æ—¥ã‚’äºˆå®šã—ã¦ã„ã¾ã™</li>
                        <li>âœ“ æ¯æœˆè‡ªå‹•æ›´æ–°ã•ã‚Œã¾ã™</li>
                        <li>âœ“ è§£ç´„ã¯æ¬¡å›ãŠå±Šã‘æ—¥ã®5æ—¥å‰ã¾ã§å¯èƒ½</li>
                        <li>âœ“ ãŠæ”¯æ‰•ã„ã¯ç™»éŒ²ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆã‚«ãƒ¼ãƒ‰ã‹ã‚‰</li>
                    </ul>
                </div>
                <button class="btn btn-primary btn-large" onclick="confirmSubscription()">
                    ç™»éŒ²ã‚’ç¢ºå®šã™ã‚‹
                </button>
                <button class="btn btn-secondary" onclick="closeModal()">
                    ã‚­ãƒ£ãƒ³ã‚»ãƒ«
                </button>
            </div>
        </div>
    </div>

    <!-- ç™»éŒ²å®Œäº†ãƒ¢ãƒ¼ãƒ€ãƒ« -->
    <div id="successModal" class="modal">
        <div class="modal-content">
            <div class="modal-icon success-icon">ğŸ‰</div>
            <h2>ç™»éŒ²å®Œäº†ï¼</h2>
            <div class="success-message">
                <p class="congrats-text">å®šæœŸä¾¿ã®ã”ç™»éŒ²ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ï¼</p>
                <div id="successSummary" class="subscription-success-summary">
                    <!-- JavaScriptã§ç”Ÿæˆ -->
                </div>
                <p class="next-delivery-info">ğŸ“… æ¬¡å›ãŠå±Šã‘äºˆå®šæ—¥ï¼š<span id="nextDeliveryDate"></span></p>
            </div>
            <button class="btn btn-primary" onclick="closeSuccessModal()">
                ãƒã‚¤ãƒšãƒ¼ã‚¸ã§ç¢ºèª
            </button>
        </div>
    </div>

    <!-- ãƒ•ãƒƒã‚¿ãƒ¼ -->
    <footer class="footer">
        <p>&copy; 2025 Ikehai - All Rights Reserved</p>
    </footer>

    <script src="js/data.js"></script>
    <script src="js/script.js"></script>
    <script>
        let selectedPlanId = null;

        // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚
        window.addEventListener('DOMContentLoaded', () => {
            displayActiveSubscriptions();
            displaySubscriptionPlans();
            displayFoodSubscription();
        });

        // ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãªã‚µãƒ–ã‚¹ã‚¯è¡¨ç¤º
        function displayActiveSubscriptions() {
            const subscriptions = getUserSubscriptions();
            const container = document.getElementById('activeSubscriptions');
            
            if (subscriptions.length === 0) {
                container.innerHTML = '';
                return;
            }
            
            let html = '<h3 class="active-sub-title">âœ¨ å¥‘ç´„ä¸­ã®å®šæœŸä¾¿</h3><div class="active-sub-list">';
            
            subscriptions.forEach(sub => {
                html += `
                    <div class="active-sub-card">
                        <div class="active-sub-info">
                            <h4>${sub.planName}</h4>
                            <p class="active-sub-price">æœˆé¡ Â¥${sub.price.toLocaleString()}</p>
                            <p class="active-sub-next">æ¬¡å›ãŠå±Šã‘: ${new Date(sub.nextDelivery).toLocaleDateString('ja-JP')}</p>
                        </div>
                        <div class="active-sub-status">
                            <span class="status-badge status-active">å¥‘ç´„ä¸­</span>
                        </div>
                    </div>
                `;
            });
            
            html += '</div>';
            container.innerHTML = html;
        }

        // ã‚°ãƒƒã‚ºå®šæœŸä¾¿ãƒ—ãƒ©ãƒ³è¡¨ç¤º
        function displaySubscriptionPlans() {
            const data = getSubscriptionData();
            const container = document.getElementById('subscriptionPlans');
            
            data.plans.forEach(plan => {
                const card = document.createElement('div');
                card.className = 'subscription-plan-card';
                if (plan.popular) {
                    card.classList.add('popular-plan');
                }
                
                const popularBadge = plan.popular ? 
                    '<span class="plan-popular-badge">ğŸŒŸ äººæ°—No.1</span>' : '';
                
                const featuresList = plan.features.map(f => 
                    `<li>âœ“ ${f}</li>`
                ).join('');
                
                card.innerHTML = `
                    <div class="plan-header" style="background: linear-gradient(135deg, ${plan.color}, ${plan.color}dd);">
                        ${popularBadge}
                        <h3 class="plan-name">${plan.name}</h3>
                        <p class="plan-name-en">${plan.nameEn}</p>
                        <div class="plan-price">
                            <span class="price-amount">Â¥${plan.price.toLocaleString()}</span>
                            <span class="price-period">/æœˆ</span>
                        </div>
                        <p class="plan-cycle">${plan.cycle}</p>
                    </div>
                    <div class="plan-body">
                        <p class="plan-description">${plan.description}</p>
                        <h4 class="plan-features-title">ğŸ ãƒ—ãƒ©ãƒ³å†…å®¹</h4>
                        <ul class="plan-features-list">
                            ${featuresList}
                        </ul>
                        <div class="plan-savings">
                            ğŸ’° å¹´é–“ã§ç´„Â¥${plan.savingsPerYear.toLocaleString()}ãŠå¾—ï¼
                        </div>
                        <button class="btn btn-primary btn-large" onclick="selectPlan(${plan.id})">
                            ã“ã®ãƒ—ãƒ©ãƒ³ã«ç™»éŒ²ã™ã‚‹
                        </button>
                    </div>
                `;
                container.appendChild(card);
            });
        }

        // ãƒ•ãƒ¼ãƒ‰å®šæœŸä¾¿è¡¨ç¤º
        function displayFoodSubscription() {
            const data = getSubscriptionData();
            const food = data.foodSubscription;
            const container = document.getElementById('foodSubscription');
            
            const featuresList = food.features.map(f => 
                `<li>âœ“ ${f}</li>`
            ).join('');
            
            container.innerHTML = `
                <div class="food-sub-image">
                    <img src="${food.image}" alt="${food.name}">
                </div>
                <div class="food-sub-content">
                    <h3 class="food-sub-title">${food.name}</h3>
                    <p class="food-sub-description">${food.description}</p>
                    <div class="food-sub-price">
                        <span class="price-amount">Â¥${food.price.toLocaleString()}</span>
                        <span class="price-period">/æœˆ</span>
                        <span class="food-sub-cycle">${food.cycle}</span>
                    </div>
                    <ul class="food-sub-features">
                        ${featuresList}
                    </ul>
                    <button class="btn btn-primary btn-large" onclick="selectPlan(${food.id})">
                        ã‚°ãƒ«ãƒ¡ä¾¿ã«ç™»éŒ²ã™ã‚‹
                    </button>
                </div>
            `;
        }

        // ãƒ—ãƒ©ãƒ³é¸æŠ
        function selectPlan(planId) {
            selectedPlanId = planId;
            const plan = getSubscriptionPlanById(planId);
            if (!plan) return;
            
            document.getElementById('modalTitle').textContent = `${plan.name} ã«ç™»éŒ²`;
            document.getElementById('modalPlanInfo').innerHTML = `
                <h3>${plan.name}</h3>
                <p class="modal-plan-price">Â¥${plan.price.toLocaleString()} / æœˆ</p>
                <p class="modal-plan-description">${plan.description}</p>
            `;
            
            document.getElementById('subscriptionModal').style.display = 'flex';
        }

        // ç™»éŒ²ç¢ºå®š
        function confirmSubscription() {
            if (!selectedPlanId) return;
            
            addSubscription(selectedPlanId);
            
            const plan = getSubscriptionPlanById(selectedPlanId);
            const nextDelivery = getNextDeliveryDate();
            
            document.getElementById('successSummary').innerHTML = `
                <div class="success-plan-info">
                    <h3>âœ¨ ${plan.name}</h3>
                    <p class="success-price">æœˆé¡ Â¥${plan.price.toLocaleString()}</p>
                </div>
            `;
            document.getElementById('nextDeliveryDate').textContent = 
                new Date(nextDelivery).toLocaleDateString('ja-JP');
            
            closeModal();
            document.getElementById('successModal').style.display = 'flex';
            
            displayActiveSubscriptions();
        }

        // ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’é–‰ã˜ã‚‹
        function closeModal() {
            document.getElementById('subscriptionModal').style.display = 'none';
            selectedPlanId = null;
        }

        // æˆåŠŸãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’é–‰ã˜ã‚‹
        function closeSuccessModal() {
            document.getElementById('successModal').style.display = 'none';
            // å®Ÿéš›ã®ã‚¢ãƒ—ãƒªã§ã¯ãƒã‚¤ãƒšãƒ¼ã‚¸ã«é·ç§»
        }
    </script>
</body>
</html>

