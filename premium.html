<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>イケ配 - プレミアム会員</title>
    
    <!-- PWA対応 -->
    <meta name="description" content="料理も、ときめきも、一緒に届けます。イケメン配達員を指名できる新感覚デリバリーアプリ。">
    <meta name="theme-color" content="#ff6b9d">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="イケ配">
    <link rel="manifest" href="./manifest.json">
    <link rel="apple-touch-icon" href="./icons/icon-192x192.png">
    
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <!-- ヘッダー -->
    <header class="header">
        <div class="container">
            <h1 class="logo">🚴 イケ配 Ikehai</h1>
            <p class="tagline">ときめく配達、届けます</p>
        </div>
    </header>

    <!-- メインコンテンツ -->
    <main class="main-content">
        <div class="container">
            <section class="intro-section">
                <h2>💎 イケ配プレミアム会員</h2>
                <p>もっとお得に、もっと特別な体験を</p>
                <p class="intro-highlight">✨ 月額会員でときめきが加速する</p>
            </section>

            <!-- 現在の会員ステータス -->
            <div class="current-status-card" id="currentStatus">
                <div class="status-icon">👤</div>
                <h3>現在のステータス: <span id="membershipStatus">無料会員</span></h3>
                <p id="membershipDescription">プレミアム会員になって、特別な特典を受け取りましょう</p>
            </div>

            <!-- プレミアムプラン -->
            <div class="premium-plans-container">
                <!-- ライトプラン -->
                <div class="plan-card plan-light">
                    <div class="plan-header">
                        <h3 class="plan-name">🌟 ライト</h3>
                        <p class="plan-price">¥480<span class="plan-period">/月</span></p>
                    </div>
                    <div class="plan-body">
                        <h4>特典内容</h4>
                        <ul class="plan-benefits">
                            <li>✓ サービス手数料 <strong>50%オフ</strong></li>
                            <li>✓ 配達状況の詳細表示</li>
                            <li>✓ 配達履歴の閲覧</li>
                            <li>✓ お気に入り無制限登録</li>
                        </ul>
                        <div class="plan-savings">
                            <p>月5回注文で <strong class="savings-amount">約¥300お得</strong></p>
                        </div>
                        <button class="btn btn-secondary" onclick="selectPlan('light', 480)">
                            ライトプランを選択
                        </button>
                    </div>
                </div>

                <!-- スタンダードプラン -->
                <div class="plan-card plan-standard">
                    <div class="plan-badge">おすすめ</div>
                    <div class="plan-header">
                        <h3 class="plan-name">⭐ スタンダード</h3>
                        <p class="plan-price">¥980<span class="plan-period">/月</span></p>
                    </div>
                    <div class="plan-body">
                        <h4>特典内容</h4>
                        <ul class="plan-benefits">
                            <li>✓ サービス手数料 <strong>100%オフ（無料）</strong></li>
                            <li>✓ 配達料 <strong>50%オフ</strong>（¥150）</li>
                            <li>✓ 人気配達員の優先予約</li>
                            <li>✓ 限定配達員へのアクセス</li>
                            <li>✓ 月1回の特別クーポン（¥500）</li>
                            <li>✓ 配達完了後のメッセージ特典</li>
                        </ul>
                        <div class="plan-savings">
                            <p>月8回注文で <strong class="savings-amount">約¥1,500お得</strong></p>
                        </div>
                        <button class="btn btn-primary btn-large" onclick="selectPlan('standard', 980)">
                            スタンダードプランを選択 🎯
                        </button>
                    </div>
                </div>

                <!-- プレミアムプラン -->
                <div class="plan-card plan-premium">
                    <div class="plan-badge premium-badge">VIP</div>
                    <div class="plan-header">
                        <h3 class="plan-name">👑 プレミアム</h3>
                        <p class="plan-price">¥1,980<span class="plan-period">/月</span></p>
                    </div>
                    <div class="plan-body">
                        <h4>特典内容（全部入り）</h4>
                        <ul class="plan-benefits">
                            <li>✓ サービス手数料 <strong>100%オフ</strong></li>
                            <li>✓ 配達料 <strong>100%オフ（無料）</strong></li>
                            <li>✓ 指名料 <strong>30%オフ</strong></li>
                            <li>✓ プラチナ配達員の先行予約</li>
                            <li>✓ VIP専用配達員へのアクセス</li>
                            <li>✓ 月3回の特別クーポン（¥500×3）</li>
                            <li>✓ 限定イベントへの招待</li>
                            <li>✓ 配達員とのビデオメッセージ</li>
                            <li>✓ 専用カスタマーサポート</li>
                        </ul>
                        <div class="plan-savings">
                            <p>月10回注文で <strong class="savings-amount">約¥4,000お得</strong></p>
                        </div>
                        <button class="btn btn-premium" onclick="selectPlan('premium', 1980)">
                            プレミアムプランを選択 👑
                        </button>
                    </div>
                </div>
            </div>

            <!-- プラン比較表 -->
            <div class="plan-comparison-container">
                <h3>📊 プラン比較表</h3>
                <table class="comparison-table">
                    <thead>
                        <tr>
                            <th>特典内容</th>
                            <th>無料</th>
                            <th>ライト</th>
                            <th>スタンダード</th>
                            <th>プレミアム</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>サービス手数料</td>
                            <td>10%</td>
                            <td class="highlight">5%</td>
                            <td class="highlight">0%</td>
                            <td class="highlight">0%</td>
                        </tr>
                        <tr>
                            <td>配達料</td>
                            <td>¥300</td>
                            <td>¥300</td>
                            <td class="highlight">¥150</td>
                            <td class="highlight">¥0</td>
                        </tr>
                        <tr>
                            <td>指名料割引</td>
                            <td>なし</td>
                            <td>なし</td>
                            <td>なし</td>
                            <td class="highlight">30%オフ</td>
                        </tr>
                        <tr>
                            <td>限定配達員</td>
                            <td>-</td>
                            <td>-</td>
                            <td>✓</td>
                            <td>✓</td>
                        </tr>
                        <tr>
                            <td>優先予約</td>
                            <td>-</td>
                            <td>-</td>
                            <td>✓</td>
                            <td>✓</td>
                        </tr>
                        <tr>
                            <td>月額クーポン</td>
                            <td>-</td>
                            <td>-</td>
                            <td>¥500</td>
                            <td>¥1,500</td>
                        </tr>
                        <tr>
                            <td>限定イベント</td>
                            <td>-</td>
                            <td>-</td>
                            <td>-</td>
                            <td>✓</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <!-- 損益分岐点の説明 -->
            <div class="breakeven-container">
                <h3>💰 お得度シミュレーション</h3>
                <div class="breakeven-cards">
                    <div class="breakeven-card">
                        <h4>ライトプラン（¥480/月）</h4>
                        <p class="breakeven-text">月<strong>5回以上</strong>注文する方におすすめ</p>
                        <p class="breakeven-detail">サービス手数料の節約で元が取れます</p>
                    </div>
                    <div class="breakeven-card">
                        <h4>スタンダードプラン（¥980/月）</h4>
                        <p class="breakeven-text">月<strong>8回以上</strong>注文する方におすすめ</p>
                        <p class="breakeven-detail">手数料＋配達料の節約で大幅お得</p>
                    </div>
                    <div class="breakeven-card">
                        <h4>プレミアムプラン（¥1,980/月）</h4>
                        <p class="breakeven-text">月<strong>10回以上</strong>注文するヘビーユーザー向け</p>
                        <p class="breakeven-detail">全ての手数料割引＋VIP体験</p>
                    </div>
                </div>
            </div>

            <!-- 戻るボタン -->
            <div class="back-button-container">
                <button class="btn btn-secondary" onclick="window.location.href='index.html'">
                    トップページに戻る
                </button>
            </div>
        </div>
    </main>

    <!-- 会員登録モーダル -->
    <div id="membershipModal" class="modal">
        <div class="modal-content">
            <div class="modal-icon">💎</div>
            <h2 id="modalPlanName">プレミアム会員登録</h2>
            <div class="membership-details">
                <p class="modal-plan-price" id="modalPlanPrice">¥980/月</p>
                <div class="membership-info">
                    <h4>🎁 選択したプランの特典</h4>
                    <div id="modalBenefitsList" class="modal-benefits">
                        <!-- JavaScriptで生成 -->
                    </div>
                </div>
                <div class="payment-note">
                    <p>💳 お支払い方法</p>
                    <p class="note-small">※このデモではLocalStorageに保存されます<br>実際のアプリではクレジットカード決済になります</p>
                </div>
            </div>
            <div class="modal-actions">
                <button class="btn btn-secondary" onclick="closeModal()">
                    キャンセル
                </button>
                <button class="btn btn-primary btn-large" onclick="confirmMembership()">
                    登録する ✨
                </button>
            </div>
        </div>
    </div>

    <!-- 登録完了モーダル -->
    <div id="successModal" class="modal">
        <div class="modal-content">
            <div class="modal-icon">🎉</div>
            <h2>プレミアム会員登録完了！</h2>
            <div class="success-message">
                <p id="successPlanName"></p>
                <p class="congrats-text">おめでとうございます！<br>今日からあなたは特別な存在です💕</p>
                <div class="benefits-summary" id="benefitsSummary">
                    <!-- JavaScriptで生成 -->
                </div>
            </div>
            <button class="btn btn-primary btn-large" onclick="goToTop()">
                早速注文する 🚴
            </button>
        </div>
    </div>

    <!-- フッター -->
    <footer class="footer">
        <p>&copy; 2025 Ikehai - All Rights Reserved</p>
    </footer>

    <script src="js/data.js"></script>
    <script src="js/script.js"></script>
    <script>
        let selectedPlan = null;
        let selectedPrice = 0;

        // プラン定義
        const MEMBERSHIP_PLANS = {
            light: {
                name: 'ライト',
                price: 480,
                icon: '🌟',
                benefits: [
                    'サービス手数料 50%オフ',
                    '配達状況の詳細表示',
                    '配達履歴の閲覧',
                    'お気に入り無制限登録'
                ],
                serviceFeeDiscount: 0.5,
                deliveryFeeDiscount: 0,
                nominationFeeDiscount: 0
            },
            standard: {
                name: 'スタンダード',
                price: 980,
                icon: '⭐',
                benefits: [
                    'サービス手数料 100%オフ（無料）',
                    '配達料 50%オフ（¥150）',
                    '人気配達員の優先予約',
                    '限定配達員へのアクセス',
                    '月1回の特別クーポン（¥500）',
                    '配達完了後のメッセージ特典'
                ],
                serviceFeeDiscount: 1.0,
                deliveryFeeDiscount: 0.5,
                nominationFeeDiscount: 0
            },
            premium: {
                name: 'プレミアム',
                price: 1980,
                icon: '👑',
                benefits: [
                    'サービス手数料 100%オフ',
                    '配達料 100%オフ（無料）',
                    '指名料 30%オフ',
                    'プラチナ配達員の先行予約',
                    'VIP専用配達員へのアクセス',
                    '月3回の特別クーポン（¥500×3）',
                    '限定イベントへの招待',
                    '配達員とのビデオメッセージ',
                    '専用カスタマーサポート'
                ],
                serviceFeeDiscount: 1.0,
                deliveryFeeDiscount: 1.0,
                nominationFeeDiscount: 0.3
            }
        };

        // ページ読み込み時の処理
        window.addEventListener('DOMContentLoaded', () => {
            checkMembershipStatus();
        });

        // 会員ステータスを確認
        function checkMembershipStatus() {
            const membership = getMembershipData();
            if (membership) {
                const plan = MEMBERSHIP_PLANS[membership.plan];
                document.getElementById('membershipStatus').textContent = 
                    `${plan.icon} ${plan.name}会員`;
                document.getElementById('membershipDescription').textContent = 
                    `${plan.name}会員として素敵な特典をお楽しみいただけます。ありがとうございます！`;
                
                const statusCard = document.getElementById('currentStatus');
                statusCard.classList.add('status-premium');
            }
        }

        // プラン選択
        function selectPlan(planType, price) {
            selectedPlan = planType;
            selectedPrice = price;
            
            const plan = MEMBERSHIP_PLANS[planType];
            
            // モーダルに情報を設定
            document.getElementById('modalPlanName').textContent = 
                `${plan.icon} ${plan.name}プラン登録`;
            document.getElementById('modalPlanPrice').textContent = 
                `¥${price.toLocaleString()}/月`;
            
            // 特典リストを生成
            const benefitsList = plan.benefits.map(benefit => 
                `<p class="modal-benefit-item">✨ ${benefit}</p>`
            ).join('');
            document.getElementById('modalBenefitsList').innerHTML = benefitsList;
            
            // モーダルを表示
            document.getElementById('membershipModal').style.display = 'flex';
        }

        // モーダルを閉じる
        function closeModal() {
            document.getElementById('membershipModal').style.display = 'none';
        }

        // 会員登録を確定
        function confirmMembership() {
            const plan = MEMBERSHIP_PLANS[selectedPlan];
            
            // LocalStorageに保存
            const membershipData = {
                plan: selectedPlan,
                planName: plan.name,
                price: selectedPrice,
                startDate: new Date().toISOString(),
                active: true,
                discounts: {
                    serviceFee: plan.serviceFeeDiscount,
                    deliveryFee: plan.deliveryFeeDiscount,
                    nominationFee: plan.nominationFeeDiscount
                }
            };
            
            localStorage.setItem('membership', JSON.stringify(membershipData));
            
            // 登録モーダルを閉じる
            closeModal();
            
            // 成功モーダルを表示
            showSuccessModal(plan);
        }

        // 成功モーダルを表示
        function showSuccessModal(plan) {
            document.getElementById('successPlanName').textContent = 
                `${plan.icon} ${plan.name}プラン登録が完了しました！`;
            
            // 特典サマリー
            const summaryHTML = `
                <div class="benefit-highlight">
                    ${plan.serviceFeeDiscount > 0 ? 
                        `<p>💰 サービス手数料 ${plan.serviceFeeDiscount * 100}%オフ</p>` : ''}
                    ${plan.deliveryFeeDiscount > 0 ? 
                        `<p>🚴 配達料 ${plan.deliveryFeeDiscount * 100}%オフ</p>` : ''}
                    ${plan.nominationFeeDiscount > 0 ? 
                        `<p>💕 指名料 ${plan.nominationFeeDiscount * 100}%オフ</p>` : ''}
                </div>
            `;
            document.getElementById('benefitsSummary').innerHTML = summaryHTML;
            
            document.getElementById('successModal').style.display = 'flex';
        }

        // トップページへ
        function goToTop() {
            window.location.href = 'index.html';
        }

        // 会員情報を取得
        function getMembershipData() {
            const data = localStorage.getItem('membership');
            return data ? JSON.parse(data) : null;
        }
    </script>
</body>
</html>

